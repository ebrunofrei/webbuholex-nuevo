<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <meta
      name="description"
      content="BúhoLex: justicia sin privilegios. Plataforma jurídica con noticias inteligentes, Oficina Virtual y asistente LitisBot."
    />
    <meta name="theme-color" content="#b03a1a" />
    <meta name="color-scheme" content="light" />
    <meta name="robots" content="index,follow" />

    <!-- Favicons / PWA -->
    <link rel="icon" href="/favicon.ico" sizes="any" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="manifest" href="/manifest.webmanifest" />

    <!-- ✅ API base declarada para apiBase.js (Vite sustituye %VITE_*%) -->
    <!-- En producción: VITE_CHAT_API_BASE_URL = https://api.buholex.com/api -->
    <!-- En dev: p.ej. http://127.0.0.1:3000/api (si no usas proxy) -->
    <meta name="api-base" content="%VITE_CHAT_API_BASE_URL%" />

    <!-- Fallback duro por si la env viene vacía pero el dominio es buholex.com -->
    <script>
      (function () {
        try {
          var m = document.querySelector('meta[name="api-base"]');
          var base = (m && m.content || "").trim();

          if (!base && /\.(^|\.)(buholex\.com)$/i.test(location.hostname)) {
            base = "https://api.buholex.com/api";
            if (m) m.content = base;
            else {
              m = document.createElement("meta");
              m.name = "api-base";
              m.content = base;
              document.head.appendChild(m);
            }
          }

          // Exponer también como global para apiBase.js (fromGlobal)
          if (base) {
            window.__API_BASE__ = base;
          }
        } catch (e) {
          // en el peor caso, apiBase.js caerá a su fallback origin/api
        }
      })();
    </script>

    <!-- Open Graph / Twitter -->
    <meta property="og:title" content="BúhoLex | Soluciones Jurídicas" />
    <meta property="og:site_name" content="BúhoLex" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://buholex.com" />
    <meta
      property="og:description"
      content="Noticias legales, Oficina Virtual y LitisBot para abogados. Profesional y listo para producción."
    />
    <meta property="og:image" content="/og-image.jpg" />
    <meta name="twitter:card" content="summary_large_image" />

    <!-- Material Icons (optimizado) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons&display=swap"
      rel="stylesheet"
    />

    <title>BúhoLex | Soluciones Jurídicas</title>

    <!-- CSP ligera (comentada por ahora) -->
    <!--
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; img-src 'self' https: data:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; script-src 'self' 'wasm-unsafe-eval' 'inline-speculation-rules'; connect-src 'self' https:;"
    />
    -->
  </head>

  <body>
    <!-- Raíz React -->
    <div id="root"></div>

    <!-- Contenedor estable para modales/portals (no borrar en runtime) -->
    <div id="portals"></div>

    <noscript>
      Necesitas habilitar JavaScript para usar BúhoLex.
    </noscript>

    <!-- Entrada Vite -->
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
